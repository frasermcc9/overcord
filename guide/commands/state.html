<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>State | Overcord Guide</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="A command framework for Discord.js that uses decorators.">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/overcord/assets/css/0.styles.42309573.css" as="style"><link rel="preload" href="/overcord/assets/js/app.58262fba.js" as="script"><link rel="preload" href="/overcord/assets/js/2.fda058ae.js" as="script"><link rel="preload" href="/overcord/assets/js/17.07cd580e.js" as="script"><link rel="prefetch" href="/overcord/assets/js/10.21be4b94.js"><link rel="prefetch" href="/overcord/assets/js/11.798f8ce8.js"><link rel="prefetch" href="/overcord/assets/js/12.d8dab755.js"><link rel="prefetch" href="/overcord/assets/js/13.631a196f.js"><link rel="prefetch" href="/overcord/assets/js/14.7904c155.js"><link rel="prefetch" href="/overcord/assets/js/15.2cf45b39.js"><link rel="prefetch" href="/overcord/assets/js/16.b6040bfb.js"><link rel="prefetch" href="/overcord/assets/js/18.4be7f503.js"><link rel="prefetch" href="/overcord/assets/js/19.4332d750.js"><link rel="prefetch" href="/overcord/assets/js/20.33164018.js"><link rel="prefetch" href="/overcord/assets/js/21.0a7b487d.js"><link rel="prefetch" href="/overcord/assets/js/3.60419601.js"><link rel="prefetch" href="/overcord/assets/js/4.4d31d94d.js"><link rel="prefetch" href="/overcord/assets/js/5.4e7a2df9.js"><link rel="prefetch" href="/overcord/assets/js/6.498ab014.js"><link rel="prefetch" href="/overcord/assets/js/7.7e550121.js"><link rel="prefetch" href="/overcord/assets/js/8.4cbb4a35.js"><link rel="prefetch" href="/overcord/assets/js/9.b751af4a.js">
    <link rel="stylesheet" href="/overcord/assets/css/0.styles.42309573.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/overcord/" class="home-link router-link-active"><!----> <span class="site-name">Overcord Guide</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/overcord/guide/" class="nav-link router-link-active">
  Guide
</a></div><div class="nav-item"><a href="/overcord/config/" class="nav-link">
  Config
</a></div><div class="nav-item"><a href="https://v1.vuepress.vuejs.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  VuePress
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/overcord/guide/" class="nav-link router-link-active">
  Guide
</a></div><div class="nav-item"><a href="/overcord/config/" class="nav-link">
  Config
</a></div><div class="nav-item"><a href="https://v1.vuepress.vuejs.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  VuePress
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Guide</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/overcord/guide/" aria-current="page" class="sidebar-link">Overcord</a></li><li><a href="/overcord/guide/installing.html" class="sidebar-link">Installation</a></li><li><a href="/overcord/guide/setup.html" class="sidebar-link">Initial Setup</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Commands</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/overcord/guide/commands/commands.html" class="sidebar-link">Commands</a></li><li><a href="/overcord/guide/commands/decorators.html" class="sidebar-link">Command Decorators</a></li><li><a href="/overcord/guide/commands/arguments.html" class="sidebar-link">Arguments</a></li><li><a href="/overcord/guide/commands/overriding.html" class="sidebar-link">Built-in Command Methods</a></li><li><a href="/overcord/guide/commands/slashCommands.html" class="sidebar-link">Slash Commands</a></li><li><a href="/overcord/guide/commands/state.html" aria-current="page" class="active sidebar-link">State</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/overcord/guide/commands/state.html#example" class="sidebar-link">Example</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="state"><a href="#state" class="header-anchor">#</a> State</h1> <p>Overcord allows for a second type of injected argument in regular (non-slash)
commands - a state. State is persisted between command usages (but is still kept
in memory, not permanently persisted).</p> <h2 id="example"><a href="#example" class="header-anchor">#</a> Example</h2> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">class</span> <span class="token class-name">PersistentCommand</span> <span class="token keyword">extends</span> <span class="token class-name">Command</span> <span class="token punctuation">{</span>
    @<span class="token generic-function"><span class="token function">Stateful</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        domain<span class="token operator">:</span> <span class="token string">&quot;GUILD&quot;</span><span class="token punctuation">,</span>
        initialState<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token function-variable function">onUpdate</span><span class="token operator">:</span> <span class="token punctuation">(</span>newState<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            Database<span class="token punctuation">.</span><span class="token function">updateNameList</span><span class="token punctuation">(</span>newState<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> nameList<span class="token operator">!</span><span class="token operator">:</span> State<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>

    <span class="token operator">...</span>

    <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">[</span>getNameList<span class="token punctuation">,</span> setNameList<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>nameList<span class="token punctuation">;</span>
      <span class="token keyword">const</span> myNameList <span class="token operator">=</span> <span class="token function">getNameList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">setNameList</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>myNameList<span class="token punctuation">,</span> <span class="token string">&quot;John&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="explanation"><a href="#explanation" class="header-anchor">#</a> Explanation</h3> <p>The above example will create a state that is persisted between command usages.
The <code>domain</code> property allows you to specify the granularity of the state, i.e.
if the state should be shared between USERS, GUILDS, or GLOBALLY.</p> <p>You can destructure the state array to get the option to read and write to the
state. You should not modify the state directly, but instead use the second
argument to set the state. Modifications will persist, but will not fire the
onUpdate callback.</p> <p>The onUpdate callback runs whenever the state is set via the second element of
the state array. This callback could be useful for updating a database for a
more permanent storage.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/overcord/guide/commands/slashCommands.html" class="prev">
        Slash Commands
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/overcord/assets/js/app.58262fba.js" defer></script><script src="/overcord/assets/js/2.fda058ae.js" defer></script><script src="/overcord/assets/js/17.07cd580e.js" defer></script>
  </body>
</html>
